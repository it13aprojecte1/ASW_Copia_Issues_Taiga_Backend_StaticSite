<div class="issue-form-container">
  <h2 class="text-center"><%= issue.subject %></h2>
  <div class="form-layout">
    <div class="left-column">
      <p>
        <strong>Content:</strong><br>
        <div class="large-textarea"><%= issue.content %></div>
      </p>
      <h2>Comentarios</h2>
        <% if issue.comments.any? %>
          <ul>
            <% issue.comments.each do |comment| %>
              <li>
                <strong><%= comment.user.email %>:</strong>
                <%= comment.content %>
              </li>
            <% end %>
          </ul>
        <% else %>
          <p class="text-muted">No hay comentarios.</p>
        <% end %>
      <h2>Añadir Comentario</h2>
      <%= form_with(model: [issue, Comment.new]) do |form| %>
        <%= form.text_area :content, class: 'large-textarea' %>
        <%= form.submit 'Añadir Comentario', class: 'btn-create' %>
      <% end %>
    </div>
    <div class="right-column">
      <div class="custom-select-box">
        <div class="select-container">
          <span class="select-label">State:</span>
          <span class="custom-select"><%= issue.status.name %></span>
        </div>
      </div>
      <div class="custom-select-box">
        <div class="select-container">
          <span class="select-label">Type:</span>
          <span class="custom-select"><%= issue.issue_type.name %></span>
        </div>
      </div>
      <div class="custom-select-box">
        <div class="select-container">
          <span class="select-label">Severity:</span>
          <span class="custom-select"><%= issue.severity.name %></span>
        </div>
      </div>
      <div class="custom-select-box">
        <div class="select-container">
          <span class="select-label">Priority:</span>
          <span class="custom-select"><%= issue.priority.name %></span>
        </div>
      </div>
      <div class="custom-select-box">
        <div class="select-container">
          <span class="select-label">User:</span>
          <span class="custom-select"><%= issue.user.email %></span>
        </div>
      </div>
      <div class="custom-select-box">
        <div class="select-container">
          <span class="select-label">Assigned to:</span>
          <% if issue.assignee.present? %>
            <span class="custom-select"><%= issue.assignee.email %></span>
          <% else %>
            <span class="text-muted">No assignee</span>
          <% end %>
        </div>
      </div>
      <!-- Aquí comienza la sección de watchers -->
      <div class="custom-select-box">
        <div class="select-container">
          <span class="select-label">Watchers:</span>
          <div class="watchers-list">
            <% if issue.watchers.any? %>
              <% issue.watchers.each do |watcher| %>
                <div class="watcher-item"><%= watcher.email %></div>
              <% end %>
            <% else %>
              <span class="text-muted">No watchers</span>
            <% end %>
          </div>
        </div>
      </div>
      <!-- Fin de la sección de watchers -->
      <p>
        <strong>Created At:</strong><br>
        <%= issue.created_at.strftime("%A, %y-%m-%d %H:%M") %>
      </p>
      <!-- Campo de Deadline siempre visible -->
      <p>
        <strong>Deadline:</strong><br>
        <% if issue.deadline.present? %>
          <%= issue.deadline.strftime("%A, %y-%m-%d %H:%M") %>
        <% else %>
          <span class="text-muted">No deadline</span>
        <% end %>
      </p>
      <a href="#" class="add-tag">Add tag +</a>
    </div>
  </div>
</div>